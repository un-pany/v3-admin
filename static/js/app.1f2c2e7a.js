(self["webpackChunkv3_admin"]=self["webpackChunkv3_admin"]||[]).push([[143],{3710:function(e,t,n){"use strict";n.r(t);var o=n(9140),s=n.n(o),r=n(4300),a=n.n(r),i=new(s())({id:"404",use:"404-usage",viewBox:"0 0 128 128",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" id="404"><path d="M121.718 73.272v9.953c3.957-7.584 6.199-16.05 6.199-24.995C127.917 26.079 99.273 0 63.958 0 28.644 0 0 26.079 0 58.23c0 .403.028.806.028 1.21l22.97-25.953h13.34l-19.76 27.187h6.42V53.77l13.728-19.477v49.361H22.998V73.272H2.158c5.951 20.284 23.608 36.208 45.998 41.399-1.44 3.3-5.618 11.263-12.565 12.674-8.607 1.764 23.358.428 46.163-13.178 17.519-4.611 31.938-15.849 39.77-30.513h-13.506V73.272H85.02V59.464l22.998-25.977h13.008l-19.429 27.187h6.421v-7.433l13.727-19.402v39.433h-.027zm-78.24 2.822a10.516 10.516 0 0 1-.996-4.535V44.548c0-1.613.332-3.124.996-4.535a11.66 11.66 0 0 1 2.713-3.68c1.134-1.032 2.49-1.864 4.04-2.468 1.55-.605 3.21-.908 4.982-.908h11.292c1.77 0 3.431.303 4.981.908 1.522.604 2.85 1.41 3.986 2.418l-12.26 16.303v-2.898a1.96 1.96 0 0 0-.665-1.512c-.443-.403-.996-.604-1.66-.604-.665 0-1.218.201-1.661.604a1.96 1.96 0 0 0-.664 1.512v9.071L44.364 77.606a10.556 10.556 0 0 1-.886-1.512zm35.73-4.535c0 1.613-.332 3.124-.997 4.535a11.66 11.66 0 0 1-2.712 3.68c-1.134 1.032-2.49 1.864-4.04 2.469-1.55.604-3.21.907-4.982.907H55.185c-1.77 0-3.431-.303-4.981-.907-1.55-.605-2.906-1.437-4.041-2.47a12.49 12.49 0 0 1-1.384-1.512l13.727-18.217v6.375c0 .605.222 1.109.665 1.512.442.403.996.604 1.66.604.664 0 1.218-.201 1.66-.604a1.96 1.96 0 0 0 .665-1.512V53.87L75.97 36.838c.913.932 1.66 1.99 2.214 3.175.664 1.41.996 2.922.996 4.535v27.011h.028z" /></symbol>'});a().add(i);t["default"]=i},957:function(e,t,n){"use strict";n.r(t);var o=n(9140),s=n.n(o),r=n(4300),a=n.n(r),i=new(s())({id:"bug",use:"bug-usage",viewBox:"0 0 128 128",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" id="bug"><path d="M127.88 73.143c0 1.412-.506 2.635-1.518 3.669-1.011 1.033-2.209 1.55-3.592 1.55h-17.887c0 9.296-1.783 17.178-5.35 23.645l16.609 17.044c1.011 1.034 1.517 2.257 1.517 3.67 0 1.412-.506 2.635-1.517 3.668-.958 1.033-2.155 1.55-3.593 1.55-1.438 0-2.635-.517-3.593-1.55l-15.811-16.063a15.49 15.49 0 0 1-1.196 1.06c-.532.434-1.65 1.208-3.353 2.322a50.104 50.104 0 0 1-5.192 2.974c-1.758.87-3.94 1.658-6.546 2.364-2.607.706-5.189 1.06-7.748 1.06V47.044H58.89v73.062c-2.716 0-5.417-.367-8.106-1.102-2.688-.734-5.003-1.631-6.945-2.692a66.769 66.769 0 0 1-5.268-3.179c-1.571-1.057-2.73-1.94-3.476-2.65L33.9 109.34l-14.611 16.877c-1.066 1.14-2.344 1.711-3.833 1.711-1.277 0-2.422-.434-3.434-1.304-1.012-.978-1.557-2.187-1.635-3.627-.079-1.44.333-2.705 1.236-3.794l16.129-18.51c-3.087-6.197-4.63-13.644-4.63-22.342H5.235c-1.383 0-2.58-.517-3.592-1.55S.125 74.545.125 73.132c0-1.412.506-2.635 1.518-3.668 1.012-1.034 2.21-1.55 3.592-1.55h17.887V43.939L9.308 29.833c-1.012-1.033-1.517-2.256-1.517-3.669 0-1.412.505-2.635 1.517-3.668 1.012-1.034 2.21-1.55 3.593-1.55s2.58.516 3.593 1.55l13.813 14.106h67.396l13.814-14.106c1.012-1.034 2.21-1.55 3.592-1.55 1.384 0 2.581.516 3.593 1.55 1.012 1.033 1.518 2.256 1.518 3.668 0 1.413-.506 2.636-1.518 3.67l-13.814 14.105v23.975h17.887c1.383 0 2.58.516 3.593 1.55 1.011 1.033 1.517 2.256 1.517 3.668l-.005.01zM89.552 26.175H38.448c0-7.23 2.489-13.386 7.466-18.469C50.892 2.623 56.92.082 64 .082c7.08 0 13.108 2.541 18.086 7.624 4.977 5.083 7.466 11.24 7.466 18.469z" /></symbol>'});a().add(i);t["default"]=i},7042:function(e,t,n){"use strict";n.r(t);var o=n(9140),s=n.n(o),r=n(4300),a=n.n(r),i=new(s())({id:"dashboard",use:"dashboard-usage",viewBox:"0 0 128 100",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 100" id="dashboard"><path d="M27.429 63.638c0-2.508-.893-4.65-2.679-6.424-1.786-1.775-3.94-2.662-6.464-2.662-2.524 0-4.679.887-6.465 2.662-1.785 1.774-2.678 3.916-2.678 6.424 0 2.508.893 4.65 2.678 6.424 1.786 1.775 3.94 2.662 6.465 2.662 2.524 0 4.678-.887 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zm13.714-31.801c0-2.508-.893-4.65-2.679-6.424-1.785-1.775-3.94-2.662-6.464-2.662-2.524 0-4.679.887-6.464 2.662-1.786 1.774-2.679 3.916-2.679 6.424 0 2.508.893 4.65 2.679 6.424 1.785 1.774 3.94 2.662 6.464 2.662 2.524 0 4.679-.888 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zM71.714 65.98l7.215-27.116c.285-1.23.107-2.378-.536-3.443-.643-1.064-1.56-1.762-2.75-2.094-1.19-.33-2.333-.177-3.429.462-1.095.639-1.81 1.573-2.143 2.804l-7.214 27.116c-2.857.237-5.405 1.266-7.643 3.088-2.238 1.822-3.738 4.152-4.5 6.992-.952 3.644-.476 7.098 1.429 10.364 1.905 3.265 4.69 5.37 8.357 6.317 3.667.947 7.143.474 10.429-1.42 3.285-1.892 5.404-4.66 6.357-8.305.762-2.84.619-5.607-.429-8.305-1.047-2.697-2.762-4.85-5.143-6.46zm47.143-2.342c0-2.508-.893-4.65-2.678-6.424-1.786-1.775-3.94-2.662-6.465-2.662-2.524 0-4.678.887-6.464 2.662-1.786 1.774-2.679 3.916-2.679 6.424 0 2.508.893 4.65 2.679 6.424 1.786 1.775 3.94 2.662 6.464 2.662 2.524 0 4.679-.887 6.465-2.662 1.785-1.775 2.678-3.916 2.678-6.424zm-45.714-45.43c0-2.509-.893-4.65-2.679-6.425C68.68 10.01 66.524 9.122 64 9.122c-2.524 0-4.679.887-6.464 2.661-1.786 1.775-2.679 3.916-2.679 6.425 0 2.508.893 4.65 2.679 6.424 1.785 1.774 3.94 2.662 6.464 2.662 2.524 0 4.679-.888 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zm32 13.629c0-2.508-.893-4.65-2.679-6.424-1.785-1.775-3.94-2.662-6.464-2.662-2.524 0-4.679.887-6.464 2.662-1.786 1.774-2.679 3.916-2.679 6.424 0 2.508.893 4.65 2.679 6.424 1.785 1.774 3.94 2.662 6.464 2.662 2.524 0 4.679-.888 6.464-2.662 1.786-1.775 2.679-3.916 2.679-6.424zM128 63.638c0 12.351-3.357 23.78-10.071 34.286-.905 1.372-2.19 2.058-3.858 2.058H13.93c-1.667 0-2.953-.686-3.858-2.058C3.357 87.465 0 76.037 0 63.638c0-8.613 1.69-16.847 5.071-24.703C8.452 31.08 13 24.312 18.714 18.634c5.715-5.68 12.524-10.199 20.429-13.559C47.048 1.715 55.333.035 64 .035c8.667 0 16.952 1.68 24.857 5.04 7.905 3.36 14.714 7.88 20.429 13.559 5.714 5.678 10.262 12.446 13.643 20.301 3.38 7.856 5.071 16.09 5.071 24.703z" /></symbol>'});a().add(i);t["default"]=i},8816:function(e,t,n){"use strict";n.r(t);var o=n(9140),s=n.n(o),r=n(4300),a=n.n(r),i=new(s())({id:"lock",use:"lock-usage",viewBox:"0 0 128 128",content:'<symbol xmlns="http://www.w3.org/2000/svg" viewBox="0 0 128 128" id="lock"><path d="M119.88 49.674h-7.987V39.52C111.893 17.738 90.45.08 63.996.08 37.543.08 16.1 17.738 16.1 39.52v10.154H8.113c-4.408 0-7.987 2.94-7.987 6.577v65.13c0 3.637 3.57 6.577 7.987 6.577H119.88c4.407 0 7.987-2.94 7.987-6.577v-65.13c-.008-3.636-3.58-6.577-7.987-6.577zm-23.953 0H32.065V39.52c0-14.524 14.301-26.295 31.931-26.295 17.63 0 31.932 11.777 31.932 26.295v10.153z" /></symbol>'});a().add(i);t["default"]=i},7176:function(e,t,n){"use strict";var o={};n.r(o),n.d(o,{permission:function(){return g}});var s=n(2847),r=n(1831),a=n(1222),i=n(5714),c=n(6168),u=n(1206),d=(0,r.aZ)({setup(e){const t=c.Z;return(0,u.q)().initTheme(),(e,n)=>{const o=(0,r.up)("router-view");return(0,r.wg)(),(0,r.j4)((0,a.SU)(i.BR),{locale:(0,a.SU)(t)},{default:(0,r.w5)((()=>[(0,r.Wm)(o)])),_:1},8,["locale"])}}});const m=d;var l=m,h=n(8485),f=n(2950),v=n(1223),p=(n(1209),n(601));const g={mounted(e,t){const{value:n}=t,o=(0,p.m)().roles;if(!(n&&n instanceof Array&&n.length>0))throw new Error("need roles! Like v-permission=\"['admin','editor']\"");{const t=n,s=o.some((e=>t.includes(e)));s||(e.style.display="none")}}};var b=n(9981),w=n.n(b),k=n(8417),y=n(5746);const P=["/login"],Z={openRoles:!0,defaultRoles:["admin"]};var R=Z,x=n(2677);const T=(0,p.m)(),E=(0,k.H)();w().configure({showSpinner:!1}),h.ZP.beforeEach((async(e,t,n)=>{if(w().start(),(0,x.LP)())if("/login"===e.path)n({path:"/"}),w().done();else if(0===T.roles.length)try{if(R.openRoles){await T.getInfo();const e=T.roles;E.setRoutes(e)}else T.setRoles(R.defaultRoles),E.setRoutes(R.defaultRoles);E.dynamicRoutes.forEach((e=>{h.ZP.addRoute(e)})),n({...e,replace:!0})}catch(o){T.resetToken(),y.z8.error(o.message||"Has Error"),n("/login"),w().done()}else n();else-1!==P.indexOf(e.path)?n():(n("/login"),w().done())})),h.ZP.afterEach((()=>{w().done()}));const z={class:"svg-icon","aria-hidden":"true"},C=["xlink:href"];var L=(0,r.aZ)({props:{name:{type:String,required:!0}},setup(e){return(t,n)=>((0,r.wg)(),(0,r.iD)("svg",z,[(0,r._)("use",{"xlink:href":`#${e.name}`},null,8,C)]))}}),H=n(497);const M=(0,H.Z)(L,[["__scopeId","data-v-1c4faea0"]]);var N=M;const O=function(e){return e.keys().map(e)},S=n(7886);function V(e){e.component("SvgIcon",N)}O(S);const _=(0,s.ri)(l);(0,v.loadAllPlugins)(_),V(_),Object.keys(o).forEach((e=>{_.directive(e,o[e])})),_.use(f.Z).use(h.ZP).mount("#app")},8998:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return s}});var o=n(825);n(5981);function s(e){e.use(o.Z)}},1223:function(e,t,n){"use strict";function o(e){const t=n(490);t.keys().forEach((n=>{"function"===typeof t(n).default&&"./index.ts"!==n&&t(n).default(e)}))}n.r(t),n.d(t,{loadAllPlugins:function(){return o}})},8583:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return r}});var o=n(1005),s=n(8863);function r(e){const t=(0,o.S1)({vue:e,apikey:"v3-admin",dsn:"/api/v1/monitor/upload",maxBreadcrumbs:100,debug:!1,silentConsole:!0},[s.d]);window.MitoInstance=t}},8485:function(e,t,n){"use strict";n.d(t,{PV:function(){return c},WC:function(){return r},aP:function(){return a}});var o=n(5303);const s=()=>n.e(953).then(n.bind(n,4953)),r=[{path:"/redirect",component:s,meta:{hidden:!0},children:[{path:"/redirect/:path(.*)",component:()=>n.e(479).then(n.bind(n,4479))}]},{path:"/login",component:()=>n.e(818).then(n.bind(n,7818)),name:"Login",meta:{hidden:!0}},{path:"/",component:s,redirect:"/dashboard",children:[{path:"dashboard",component:()=>n.e(27).then(n.bind(n,2027)),name:"Dashboard",meta:{title:"首页",icon:"dashboard",affix:!0}}]},{path:"/monitor",component:s,redirect:"/monitor",children:[{path:"index",component:()=>n.e(954).then(n.bind(n,9954)),name:"Monitor",meta:{title:"监控",icon:"bug"}}]}],a=[{path:"/permission",component:s,redirect:"/permission/page",name:"Permission",meta:{title:"权限管理",icon:"lock",roles:["admin","editor"],alwaysShow:!0},children:[{path:"page",component:()=>n.e(959).then(n.bind(n,7959)),name:"PagePermission",meta:{title:"页面权限",roles:["admin"]}},{path:"directive",component:()=>n.e(979).then(n.bind(n,6979)),name:"DirectivePermission",meta:{title:"指令权限"}}]},{path:"/:pathMatch(.*)*",component:s,redirect:"/404",name:"ErrorPage",meta:{title:"错误页面",icon:"404",hidden:!0},children:[{path:"401",component:()=>n.e(745).then(n.bind(n,4745)),name:"401",meta:{title:"401"}},{path:"404",component:()=>n.e(473).then(n.bind(n,2473)),name:"404",meta:{title:"404"}}]}],i=(0,o.p7)({history:(0,o.r5)(),routes:r});function c(){try{i.getRoutes().forEach((e=>{var t;const{name:n,meta:o}=e;n&&null!==(t=o.roles)&&void 0!==t&&t.length&&i.hasRoute(n)&&i.removeRoute(n)}))}catch(e){window.location.reload()}}t["ZP"]=i},2950:function(e,t,n){"use strict";var o=n(6288);const s=(0,o.WB)();t["Z"]=s},1206:function(e,t,n){"use strict";n.d(t,{Y:function(){return a},q:function(){return c}});var o=n(6288),s=n(2677);const r=[{title:"默认",name:"normal"},{title:"黑暗",name:"dark"}];var a,i=r;(function(e){e[e["Mobile"]=0]="Mobile",e[e["Desktop"]=1]="Desktop"})(a||(a={}));const c=(0,o.Q_)({id:"app",state:()=>({device:a.Desktop,sidebar:{opened:"closed"!==(0,s.dd)(),withoutAnimation:!1},themeList:i,activeThemeName:(0,s.mr)()||"normal"}),actions:{toggleSidebar(e){this.sidebar.opened=!this.sidebar.opened,this.sidebar.withoutAnimation=e,this.sidebar.opened?(0,s.Ue)("opened"):(0,s.Ue)("closed")},closeSidebar(e){this.sidebar.opened=!1,this.sidebar.withoutAnimation=e,(0,s.Ue)("closed")},toggleDevice(e){this.device=e},setTheme(e){this.activeThemeName=this.themeList.find((t=>t.name===e))?e:this.themeList[0].name,document.body.className=`theme-${this.activeThemeName}`,(0,s.jC)(this.activeThemeName)},initTheme(){document.body.className=`theme-${this.activeThemeName}`}}})},8417:function(e,t,n){"use strict";n.d(t,{H:function(){return u},e:function(){return c}});var o=n(2950),s=n(6288),r=n(8485);const a=(e,t)=>!t.meta||!t.meta.roles||e.some((e=>{var n;return void 0!==(null===(n=t.meta)||void 0===n?void 0:n.roles)&&t.meta.roles.includes(e)})),i=(e,t)=>{const n=[];return e.forEach((e=>{const o={...e};a(t,o)&&(o.children&&(o.children=i(o.children,t)),n.push(o))})),n},c=(0,s.Q_)({id:"permission",state:()=>({routes:[],dynamicRoutes:[]}),actions:{setRoutes(e){let t;t=e.includes("admin")?r.aP:i(r.aP,e),this.routes=r.WC.concat(t),this.dynamicRoutes=t}}});function u(){return c(o.Z)}},601:function(e,t,n){"use strict";n.d(t,{L:function(){return b},m:function(){return w}});var o=n(2950),s=n(6288),r=n(8417),a=n(2677),i=n(8485),c=(n(1209),n(6090)),u=n.n(c),d=n(4029),m=n(5746);function l(){const e=u().create();return e.interceptors.request.use((e=>e),(e=>Promise.reject(e))),e.interceptors.response.use((e=>{const t=e.data,n=t.code;if(void 0===n)return m.z8.error("非本系统的接口"),Promise.reject(new Error("非本系统的接口"));switch(n){case 0:return t;case 2e4:return t;default:return m.z8.error(t.msg||"Error"),Promise.reject(new Error("Error"))}}),(e=>{const t=(0,d.Z)(e,"response.status");switch(t){case 400:e.message="请求错误";break;case 401:e.message="未授权，请登录";break;case 403:w().logout(),location.reload();break;case 404:e.message="请求地址出错";break;case 408:e.message="请求超时";break;case 500:e.message="服务器内部错误";break;case 501:e.message="服务未实现";break;case 502:e.message="网关错误";break;case 503:e.message="服务不可用";break;case 504:e.message="网关超时";break;case 505:e.message="HTTP版本不受支持";break;default:break}return m.z8.error(e.message),Promise.reject(e)})),e}function h(e){return function(t){const n={headers:{"X-Access-Token":(0,a.LP)(),"Content-Type":(0,d.Z)(t,"headers.Content-Type","application/json")},timeout:5e3,baseURL:"https://vue-typescript-admin-mock-server-armour.vercel.app/mock-api/v1",data:{}};return e(Object.assign(n,t))}}const f=l(),v=h(f);function p(e){return v({url:"users/login",method:"post",data:e})}function g(){return v({url:"users/info",method:"post"})}const b=(0,s.Q_)({id:"user",state:()=>({token:(0,a.LP)()||"",roles:[]}),actions:{setRoles(e){this.roles=e},login(e){return new Promise(((t,n)=>{p({username:e.username.trim(),password:e.password}).then((e=>{(0,a.o4)(e.data.accessToken),this.token=e.data.accessToken,t(!0)})).catch((e=>{n(e)}))}))},getInfo(){return new Promise(((e,t)=>{g().then((t=>{this.roles=t.data.user.roles,e(t)})).catch((e=>{t(e)}))}))},async changeRoles(e){const t=e+"-token";this.token=t,(0,a.o4)(t),await this.getInfo();const n=(0,r.e)();n.setRoutes(this.roles),(0,i.PV)(),n.dynamicRoutes.forEach((e=>{i.ZP.addRoute(e)}))},logout(){(0,a.gy)(),this.token="",this.roles=[],(0,i.PV)()},resetToken(){(0,a.gy)(),this.token="",this.roles=[]}}});function w(){return b(o.Z)}},2677:function(e,t,n){"use strict";n.d(t,{mr:function(){return l},dd:function(){return i},LP:function(){return u},gy:function(){return m},jC:function(){return h},Ue:function(){return c},o4:function(){return d}});var o=n(5892);class s{}(0,o.Z)(s,"sidebarStatus","v3-admin-sidebar-status-key"),(0,o.Z)(s,"language","v3-admin-language-key"),(0,o.Z)(s,"token","v3-admin-token-key"),(0,o.Z)(s,"activeThemeName","v3-admin-active-theme-name");var r=s,a=n(6131);const i=()=>a.Z.get(r.sidebarStatus),c=e=>a.Z.set(r.sidebarStatus,e),u=()=>a.Z.get(r.token),d=e=>a.Z.set(r.token,e),m=()=>a.Z.remove(r.token),l=()=>a.Z.get(r.activeThemeName),h=e=>{a.Z.set(r.activeThemeName,e)}},7886:function(e,t,n){var o={"./404.svg":3710,"./bug.svg":957,"./dashboard.svg":7042,"./lock.svg":8816};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=7886},490:function(e,t,n){var o={"./element.ts":8998,"./index.ts":1223,"./monitor.ts":8583};function s(e){var t=r(e);return n(t)}function r(e){if(!n.o(o,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return o[e]}s.keys=function(){return Object.keys(o)},s.resolve=r,e.exports=s,s.id=490}},function(e){var t=function(t){return e(e.s=t)};e.O(0,[998],(function(){return t(7176)}));e.O()}]);